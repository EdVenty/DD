(this["webpackJsonpdd-0.1"]=this["webpackJsonpdd-0.1"]||[]).push([[0],{144:function(e,t,n){},145:function(e,t,n){},154:function(e,t,n){},155:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),r=n(55),i=n.n(r),s=(n(144),n(15)),o=(n(145),n(203)),j=n(87),u=n(4),d=n(7),l=n(45),b=n(16),h=n(17),O=n(232),x=n(233),f=n(204),p=n(92),g=n(221),v=n(230),m=n(223),w=n(211),C=n(212),k=n(231),D=n(227),y=n(226),F=n(124),S=n(234),L=n(209),I=n(122),U=n.n(I),A=n(215),T=n(84),P=n.n(T),N=n(120),M=n.n(N),E=n(119),R=n.n(E),W=n(121),B=n.n(W),G=n(22),H=n(210),X=n(115),z=n(99),q=n(31),J=function(e){return{name:e.displayName,photoURL:e.photoURL}},V=function(e){if(!e)return{};var t=e.data();return{displayName:null===t||void 0===t?void 0:t.name,sex:null===t||void 0===t?void 0:t.sex,photoURL:null===t||void 0===t?void 0:t.photoURL}},_=function(e){if(!e)return{};var t=e.data();return{author:null===t||void 0===t?void 0:t.Author,content:null===t||void 0===t?void 0:t.Content,headerImage:null===t||void 0===t?void 0:t.HeaderImage,timestamp:null===t||void 0===t?void 0:t.Timestamp,title:null===t||void 0===t?void 0:t.Title,newsId:null===e||void 0===e?void 0:e.id}},K=function(e){if(!e)return{};var t=e.data();return{uid:null===e||void 0===e?void 0:e.id,timestamp:null===t||void 0===t?void 0:t.Timestamp}},Y=(Object(X.a)({apiKey:"AIzaSyBlqB_0nI-CGH1UI23XeveLabHwiMDXX5c",authDomain:"dorogadobra-85fd2.firebaseapp.com",projectId:"dorogadobra-85fd2",storageBucket:"dorogadobra-85fd2.appspot.com",messagingSenderId:"888417216434",appId:"1:888417216434:web:57d27244768edbeea6e6ab",measurementId:"G-5XSCSWLNVY"}),new z.a),Q=Object(z.b)(),Z=Object(q.g)(),$=a.a.createContext({auth:Q,provider:Y,db:Z});function ee(e){return new Promise((function(t,n){return Object(q.e)(Object(q.d)(Z,"users",e.uid)).then((function(e){return t({userFirestore:V(e),userExists:e.exists()})})).catch((function(e){return n(e)}))}))}function te(e,t){return new Promise((function(n,c){return Object(q.j)(Object(q.d)(Z,"users",e.uid),J(t)).then((function(e){return n(e)}))}))}var ne=n(75),ce=n(225),ae=n(216),re=n(222),ie=n(219),se=n(46),oe=n(3),je=["userFirestore"],ue=["userFirestore","userLoaded"],de=function(e){Object(se.g)(e).then((function(){})).catch((function(e){console.warn("Unable to sign out!")}))},le=function(e){var t=e.userFirestore,n=(Object(ne.a)(e,je),Object(c.useContext)($)),r=n.auth,i=(n.provider,Object(c.useState)(t)),j=Object(s.a)(i,2),u=j[0],d=(j[1],Object(c.useState)(!1)),l=Object(s.a)(d,2),b=l[0],h=l[1];return Object(oe.jsxs)(a.a.Fragment,{children:[Object(oe.jsx)(o.a,{sx:{backgroundColor:"#fff",padding:"2rem",color:"#000"},children:Object(oe.jsxs)(f.a,{spacing:"1rem",children:[Object(oe.jsx)(ce.a,{variant:"square",src:null===u||void 0===u?void 0:u.photoURL,sx:{width:"200px",height:"200px"}}),Object(oe.jsx)(ae.a,{id:"standard-basic",label:"\u041f\u043e\u043b\u043d\u043e\u0435 \u0438\u043c\u044f",variant:"standard",defaultValue:null===u||void 0===u?void 0:u.displayName,onChange:function(e){return u.displayName=e.target.value}}),Object(oe.jsx)(y.a,{variant:"contained",color:"primary",onClick:function(){te(r.currentUser,u),h(!0)},children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),Object(oe.jsx)(y.a,{variant:"contained",color:"warning",onClick:function(){de(r)},children:"\u0412\u044b\u0439\u0442\u0438"})]})}),Object(oe.jsx)(re.a,{open:b,autoHideDuration:6e3,onClose:function(){return h(!1)},children:Object(oe.jsx)(ie.a,{severity:"success",onClose:function(){return h(!1)},variant:"filled",children:"\u0414\u0430\u043d\u043d\u044b\u0435 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b!"})})]})},be=function(e){Object.assign({},e);return Object(oe.jsx)(a.a.Fragment,{children:Object(oe.jsx)(o.a,{sx:{backgroundColor:"#fff",padding:"2rem"},children:Object(oe.jsxs)(f.a,{spacing:"1rem",children:[Object(oe.jsx)(D.a,{variant:"rectangular",width:200,height:200}),Object(oe.jsx)(D.a,{variant:"text"}),Object(oe.jsx)(D.a,{variant:"rectangular",height:36.5}),Object(oe.jsx)(D.a,{variant:"rectangular",height:36.5})]})})})},he=function(e){var t=e.userFirestore,n=e.userLoaded;Object(ne.a)(e,ue);return Object(oe.jsx)(a.a.Fragment,{children:n?Object(oe.jsx)(le,{userFirestore:t}):Object(oe.jsx)(be,{})})},Oe=function(e){Object.assign({},e);var t=Object(c.useContext)($),n=t.auth,r=t.provider;return Object(oe.jsxs)(a.a.Fragment,{children:[Object(oe.jsx)(p.a,{variant:"body1",children:"\u0412\u043e\u0439\u0434\u0438\u0442\u0435 \u0432 Google \u0430\u043a\u043a\u0430\u0443\u043d\u0442, \u0447\u0442\u043e\u0431\u044b \u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c"}),Object(oe.jsx)(y.a,{variant:"contained",onClick:function(){!function(e,t){Object(se.e)(e,se.b).then((function(){Object(se.f)(e,t).then((function(e){se.a.credentialFromResult(e).accessToken,e.user})).catch((function(e){var t=e.code,n=e.message;console.log(t),console.log(n),e.email,se.a.credentialFromError(e)}))}))}(n,r)},children:"\u0412\u043e\u0439\u0442\u0438"})]})},xe=function(e){Object.assign({},e);var t=Object(c.useContext)($),n=t.auth,r=(t.provider,Object(c.useState)(n.currentUser)),i=Object(s.a)(r,2),j=i[0],u=i[1],d=Object(c.useState)({}),l=Object(s.a)(d,2),b=l[0],h=l[1],O=Object(c.useState)(!1),x=Object(s.a)(O,2),g=x[0],v=x[1],m=Object(c.useState)(void 0),w=Object(s.a)(m,2),C=w[0],k=w[1];return a.a.useEffect((function(){Object(se.d)(n,(function(e){e?void 0===C&&(k(function(e,t){return Object(q.h)(Object(q.d)(Z,"users",e.uid),(function(e){return t(V(e))}))}(e,(function(e){h(e),v(!0)}))),ee(e).then((function(t){var n,c;t.userExists?(u(e),h(t.userFirestore),v(!0)):te(e,{displayName:null===e||void 0===e||null===(n=e.displayName)||void 0===n?void 0:n.toString(),photoURL:null===e||void 0===e||null===(c=e.photoURL)||void 0===c?void 0:c.toString()}).then((function(){u(e)}))}))):(u(e),v(!1),C&&C())}))}),[C,n]),Object(oe.jsx)(a.a.Fragment,{children:Object(oe.jsx)(o.a,{sx:{padding:"1rem",color:"#fff"},children:Object(oe.jsxs)(f.a,{spacing:"1.5rem",children:[Object(oe.jsx)(p.a,{variant:"h3",children:"\u0412\u0430\u0448 \u0430\u043a\u043a\u0430\u0443\u043d\u0442 \u0414\u043e\u0440\u043e\u0433\u0438 \u0414\u043e\u0431\u0440\u0430"}),j?Object(oe.jsx)(he,{userFirestore:b,userLoaded:g}):Object(oe.jsx)(Oe,{})]})})})},fe=Object(A.a)(O.a)({backgroundColor:"#fff",color:"#000",transition:"margin-left 0.3s"});function pe(e){switch(e){case"/DD":return"\u0413\u043b\u0430\u0432\u043d\u0430\u044f";case"/DD/news":return"\u041d\u043e\u0432\u043e\u0441\u0442\u0438";case"/DD/gallery":return"\u0413\u0430\u043b\u0435\u0440\u0435\u044f";case"/DD/account":return"\u0410\u043a\u043a\u0430\u0443\u043d\u0442"}}var ge=function(e){Object(b.a)(n,e);var t=Object(h.a)(n);function n(e){var c;return Object(u.a)(this,n),(c=t.call(this,e)).state={accountMenuOpen:!1,drawerOpen:!1,accountCircleAnchor:null,drawerWidthPx:55,userFirestoreLoaded:!1},c.handleAccountClick=c.handleAccountClick.bind(Object(l.a)(c)),c.handleAccountClose=c.handleAccountClose.bind(Object(l.a)(c)),c.handleDrawerToggle=c.handleDrawerToggle.bind(Object(l.a)(c)),c}return Object(d.a)(n,[{key:"handleDrawerToggle",value:function(){this.props.setDrawerWidthCallback((this.state.drawerOpen?55:240)+"px"),this.setState({drawerOpen:!this.state.drawerOpen,drawerWidthPx:this.state.drawerOpen?55:240})}},{key:"handleAccountClick",value:function(e){this.setState({accountCircleAnchor:e.currentTarget,accountMenuOpen:!0})}},{key:"handleAccountClose",value:function(){this.setState({accountCircleAnchor:null,accountMenuOpen:!1})}},{key:"componentDidMount",value:function(){var e=this;Object(se.d)(this.context.auth,(function(t){t&&ee(t).then((function(t){console.log("sus"),e.setState({userFirestore:t.userFirestore,userFirestoreLoaded:!0})}))}))}},{key:"render",value:function(){var e=this;return Object(oe.jsxs)(L.a,{sx:{flexGrow:1},children:[Object(oe.jsx)(fe,{position:"static",className:"root",sx:{marginLeft:this.state.drawerWidthPx+"px"},children:Object(oe.jsx)(x.a,{children:Object(oe.jsxs)(f.a,{spacing:2,direction:"row",children:[Object(oe.jsx)(p.a,{variant:"h6",children:"\u0414\u043e\u0440\u043e\u0433\u0430 \u0434\u043e\u0431\u0440\u0430"}),Object(oe.jsx)(H.a,{orientation:"vertical",flexItem:!0,variant:"middle"}),Object(oe.jsx)(p.a,{variant:"h6",children:pe(this.props.location.pathname)})]})})}),Object(oe.jsxs)(g.a,{open:this.state.drawerOpen,onClose:this.handleDrawerToggle,onOpen:this.handleDrawerToggle,variant:"permanent",sx:Object(j.a)({flexShrink:0},{"& .MuiDrawer-paper":{boxSizing:"border-box",width:this.state.drawerWidthPx+"px",transition:"width 0.3s"}}),children:[Object(oe.jsxs)(v.a,{children:[Object(oe.jsxs)(m.a,{button:!0,onClick:function(){return e.props.navigate("/DD")},children:[Object(oe.jsx)(w.a,{children:Object(oe.jsx)(P.a,{})}),Object(oe.jsx)(C.a,{primary:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"})]}),Object(oe.jsxs)(m.a,{button:!0,onClick:function(){return e.props.navigate("/DD/news")},children:[Object(oe.jsx)(w.a,{children:Object(oe.jsx)(R.a,{})}),Object(oe.jsx)(C.a,{primary:"\u041d\u043e\u0432\u043e\u0441\u0442\u0438"})]}),Object(oe.jsxs)(m.a,{button:!0,onClick:function(){return e.props.navigate("/DD/gallery")},children:[Object(oe.jsx)(w.a,{children:Object(oe.jsx)(M.a,{})}),Object(oe.jsx)(C.a,{primary:"\u0413\u0430\u043b\u0435\u0440\u0435\u044f"})]}),Object(oe.jsx)(m.a,{button:!0,onClick:function(t){return e.handleDrawerToggle()},children:Object(oe.jsx)(w.a,{children:Object(oe.jsx)(B.a,{sx:{transform:this.state.drawerOpen?"rotate(0.5turn)":"inherit",transition:"transform 0.3s"}})})})]}),Object(oe.jsx)(v.a,{sx:{marginTop:"auto"},children:Object(oe.jsx)(m.a,{children:Object(oe.jsxs)(f.a,{direction:"row",spacing:"20px",children:[Object(oe.jsx)(k.a,{sx:{padding:"0px"},onClick:this.handleAccountClick,children:Object(oe.jsx)(U.a,{})}),null!==this.context.auth.currentUser?this.state.userFirestoreLoaded?Object(oe.jsx)(p.a,{sx:{whiteSpace:"nowrap"},children:this.state.userFirestore.displayName}):Object(oe.jsx)(D.a,{variant:"text"}):Object(oe.jsx)(y.a,{variant:"contained",children:"\u0412\u043e\u0439\u0442\u0438"})]})})}),Object(oe.jsxs)(F.a,{id:"basic-menu",open:this.state.accountMenuOpen,onClose:this.handleAccountClose,anchorEl:this.state.accountCircleAnchor,MenuListProps:{"aria-labelledby":"basic-button"},children:[Object(oe.jsx)(S.a,{onClick:function(){e.handleAccountClose(),e.props.navigate("/account")},children:"\u0412\u0430\u0448 \u0430\u043a\u043a\u0430\u0443\u043d\u0442"}),null!==this.context.auth.currentUser?Object(oe.jsx)(a.a.Fragment,{children:Object(oe.jsx)(S.a,{onClick:function(){de(e.context.auth),e.handleAccountClose()},children:"\u0412\u044b\u0439\u0442\u0438"})}):Object(oe.jsx)(a.a.Fragment,{children:Object(oe.jsx)(S.a,{onClick:function(){e.handleAccountClose(),e.props.navigate("/account")},children:"\u0412\u043e\u0439\u0442\u0438"})})]})]})]})}}]),n}(a.a.PureComponent);ge.contextType=$;var ve=function(e){var t=Object(G.f)(),n=Object(G.e)();return Object(oe.jsx)(ge,Object(j.a)(Object(j.a)({},e),{},{navigate:t,location:n}))};n(154);function me(e){var t=Object.assign({},e);return Object(oe.jsx)("div",{className:"news-card-grid",children:t.children})}var we=function(e){Object.assign({},e);var t=Object(G.f)();return Object(oe.jsxs)(a.a.Fragment,{children:[Object(oe.jsxs)(o.a,{sx:{margin:"2rem",color:"#fff"},children:[Object(oe.jsx)(p.a,{variant:"h3",children:"\u041d\u043e\u0432\u043e\u0441\u0442\u0438"}),Object(oe.jsx)(p.a,{variant:"subtitle1",children:"\u0421\u043c\u043e\u0442\u0440\u0438\u0442\u0435 \u043d\u0430\u0448\u0438 \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 \u043d\u043e\u0432\u043e\u0441\u0442\u0438"}),Object(oe.jsx)(y.a,{onClick:function(){return t("/news")},variant:"contained",children:"\u0412\u0441\u0435 \u043d\u043e\u0432\u043e\u0441\u0442\u0438"})]}),Object(oe.jsx)(me,{})]})},Ce=n(12),ke=n(235),De=n(236),ye=n(237),Fe=n(238),Se=n(239),Le=n(220),Ie=n(213),Ue=n(214),Ae=["title","media","content","timestamp","newsId"],Te=function(e){var t=e.title,n=e.media,a=e.content,r=e.timestamp,i=e.newsId,o=(Object(ne.a)(e,Ae),Object(c.useContext)($)),j=o.auth,u=(o.provider,Object(c.useState)(!1)),d=Object(s.a)(u,2),l=d[0],b=d[1],h=Object(c.useState)(!1),O=Object(s.a)(h,2),x=O[0],f=O[1];return Object(c.useEffect)((function(){!l&&j.currentUser&&(function(e,t){return new Promise((function(e,n){Object(q.f)(Object(q.i)(Object(q.b)(Z,"news",t,"likes"))).then((function(t){return e(t.docs.map(K))}))}))}(j.currentUser,i).then((function(e){var t,n=Object(Ce.a)(e);try{for(n.s();!(t=n.n()).done;){var c=t.value;if(console.log(c),c.uid===j.currentUser.uid){f(!0),console.log("Like found");break}}}catch(a){n.e(a)}finally{n.f()}})),b(!0))}),[b,f,j,l,i]),Object(oe.jsxs)(ke.a,{sx:{minWidth:150},children:[Object(oe.jsx)(De.a,{title:t,subheader:r}),Object(oe.jsx)(ye.a,{component:"img",height:"194",image:n,alt:t}),Object(oe.jsx)(Fe.a,{children:Object(oe.jsx)(p.a,{variant:"body2",color:"text.secondary",children:a})}),Object(oe.jsxs)(Se.a,{children:[l?Object(oe.jsx)(Le.a,{icon:Object(oe.jsx)(Ie.a,{}),checkedIcon:Object(oe.jsx)(Ue.a,{}),checked:x,onClick:function(e){j.currentUser&&(console.log(x),x?(f(!1),function(e,t){Object(q.c)(Object(q.d)(Z,"news",t,"likes",e.uid))}(j.currentUser,i)):(f(!0),function(e,t){Object(q.j)(Object(q.d)(Z,"news",t,"likes",e.uid),{Timestamp:q.a.fromDate(new Date)})}(j.currentUser,i)))}}):Object(oe.jsx)(D.a,{variant:"rectangular",width:50,height:50}),Object(oe.jsx)(y.a,{size:"small",sx:{marginLeft:"auto"},children:"\u0427\u0438\u0442\u0430\u0442\u044c \u0434\u0430\u043b\u0435\u0435"})]})]})},Pe=function(e){Object.assign({},e);var t=Object(c.useState)([]),n=Object(s.a)(t,2),r=n[0],i=n[1];return Object(c.useEffect)((function(){0===r.length&&new Promise((function(e,t){Object(q.f)(Object(q.i)(Object(q.b)(Z,"news"))).then((function(t){console.log(t),e(t.docs.map(_))}))})).then((function(e){console.log(e),i(e)}))})),Object(oe.jsx)(a.a.Fragment,{children:Object(oe.jsxs)(o.a,{sx:{color:"#fff",justifyContent:"space-around",padding:"1rem"},children:[Object(oe.jsx)(p.a,{variant:"h3",children:"\u041d\u043e\u0432\u043e\u0441\u0442\u0438 \u0414\u043e\u0440\u043e\u0433\u0438 \u0414\u043e\u0431\u0440\u0430"}),r.length>0?Object(oe.jsx)("div",{className:"news-grid",children:r.map((function(e){var t;return Object(oe.jsx)(Te,{content:e.content,media:e.headerImage,timestamp:"\u041e\u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u043d\u043e "+(null===(t=e.timestamp)||void 0===t?void 0:t.toDate().toLocaleDateString()),title:e.title,newsId:e.newsId})}))}):Object(oe.jsxs)("div",{className:"news-grid",children:[Object(oe.jsx)(D.a,{variant:"rectangular",width:275,height:433}),Object(oe.jsx)(D.a,{variant:"rectangular",width:275,height:433}),Object(oe.jsx)(D.a,{variant:"rectangular",width:275,height:433})]})]})})},Ne=n(228),Me=n(240),Ee=n(123),Re=n.n(Ee);function We(){return Object(oe.jsxs)(Ne.a,{children:[Object(oe.jsx)("img",{src:"https://cdn.pixabay.com/photo/2015/04/23/22/00/tree-736885_1280.jpg"}),Object(oe.jsx)(Me.a,{title:"Sunset",position:"top",actionIcon:Object(oe.jsx)(Le.a,{icon:Object(oe.jsx)(Re.a,{sx:{color:"#fff"}}),checkedIcon:Object(oe.jsx)(P.a,{sx:{color:"#fff"}})}),actionPosition:"left"})]})}var Be=function(e){Object.assign({},e);return Object(oe.jsx)(a.a.Fragment,{children:Object(oe.jsx)(o.a,{sx:{color:"#fff",justifyContent:"space-around",padding:"1rem"},children:Object(oe.jsx)(We,{})})})};var Ge=function(){var e=a.a.useState("55px"),t=Object(s.a)(e,2),n=t[0],c=t[1];return Object(oe.jsxs)("div",{className:"App",children:[Object(oe.jsx)(ve,{setDrawerWidthCallback:c}),Object(oe.jsx)(o.a,{sx:{display:"flex",marginTop:"2rem",marginLeft:n,transition:"margin-left 0.3s"},children:Object(oe.jsxs)(G.c,{children:[Object(oe.jsx)(G.a,{path:"/DD",element:Object(oe.jsx)(we,{})}),Object(oe.jsx)(G.a,{path:"/DD/news",element:Object(oe.jsx)(Pe,{})}),Object(oe.jsx)(G.a,{path:"/DD/gallery",element:Object(oe.jsx)(Be,{})}),Object(oe.jsx)(G.a,{path:"/DD/account",element:Object(oe.jsx)(xe,{})})]})})]})},He=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,242)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),c(e),a(e),r(e),i(e)}))},Xe=n(69);i.a.render(Object(oe.jsx)(a.a.StrictMode,{children:Object(oe.jsx)($.Provider,{value:{auth:Q,provider:Y,db:Z},children:Object(oe.jsx)(Xe.a,{children:Object(oe.jsx)(Ge,{})})})}),document.getElementById("root")),He()}},[[155,1,2]]]);
//# sourceMappingURL=main.419e79b4.chunk.js.map