{"version":3,"sources":["fire.ts","PageAccount.tsx","NavBar.tsx","useGlobalStates.ts","NewsCard.tsx","PageMain.tsx","PageNews.tsx","ImageListed.tsx","PageGallery.tsx","AuthNeededDialog.tsx","PhotoViewer.tsx","App.tsx","reportWebVitals.js","index.tsx"],"names":["userConveter","userFirestore","name","displayName","photoURL","snapshot","data","sex","newsConveter","author","Author","content","Content","headerImage","HeaderImage","timestamp","Timestamp","title","Title","newsId","id","likesConveter","uid","photosConverter","url","provider","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","GoogleAuthProvider","auth","getAuth","db","getFirestore","AuthContext","React","createContext","getUserInFirestore","user","Promise","resolve","reject","getDoc","doc","then","value","userExists","exists","catch","reason","setUserInFirestore","setDoc","onUserInFirestoreUpdate","callback","onSnapshot","getNews","getDocs","query","collection","orderBy","console","log","docs","map","logOut","signOut","error","warn","AuthorizedLoaded","useContext","useState","snackOpen","setOpenSnack","Fragment","Box","sx","backgroundColor","padding","color","Stack","spacing","Avatar","variant","src","width","height","TextField","label","defaultValue","onChange","event","target","Button","onClick","currentUser","Snackbar","open","autoHideDuration","onClose","Alert","severity","AuthorizedLoading","Skeleton","Authorized","userLoaded","NotAuthorized","Typography","setPersistence","browserLocalPersistence","signInWithPopup","result","errorCode","code","errorMessage","message","logIn","Account","setUser","setUserFirestore","userFirestoreLoaded","setUserFirestoreLoaded","undefined","listener","setListener","useEffect","onAuthStateChanged","toString","MyAppBar","styled","AppBar","transition","getLocName","path","NavBar","props","state","accountMenuOpen","drawerOpen","accountCircleAnchor","drawerWidthPx","handleAccountClick","bind","handleAccountClose","handleDrawerToggle","this","setDrawerWidthCallback","setState","currentTarget","context","userFire","flexGrow","position","className","marginLeft","Toolbar","direction","Divider","orientation","flexItem","location","pathname","SwipeableDrawer","onOpen","flexShrink","boxSizing","List","ListItem","button","navigate","ListItemIcon","ListItemText","primary","a","transform","marginTop","IconButton","whiteSpace","Menu","anchorEl","MenuListProps","MenuItem","PureComponent","contextType","WithNavigate","useNavigate","useLocation","createGlobalState","useGlobalAuthNeeded","GlobalAuthNeededProvider","useGlobalPhotoViewer","GlobalPhotoViewerProvider","NewsCard","media","likesLoaded","setLikesLoaded","likeGot","setLikeGot","setAuthNeeded","getLikesFromNews","like","Card","minWidth","CardHeader","subheader","CardMedia","component","image","alt","CardContent","CardActions","Checkbox","icon","FavoriteBorder","checkedIcon","Favorite","checked","deleteDoc","removeLikeFromNews","fromDate","Date","addLikeToNews","size","Main","news","setNews","length","newsRaw","margin","newsOne","toDate","toLocaleDateString","News","justifyContent","ImageListed","photoId","setViewerData","getLikesFromPhoto","ImageListItem","style","cursor","ImageListItemBar","actionIcon","removeLikeFromPhoto","addLikeToPhoto","actionPosition","Gallery","photosLoaded","setPhotosLoaded","photos","setPhotos","photos_","ImageList","cols","photo","AuthNeededDialog","needAuth","setNeedAuth","Dialog","DialogTitle","DialogContent","DialogContentText","DialogActions","autoFocus","PhotoViewer","viewerData","App","drawerWidth","setDrawerWidth","display","element","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","Provider","document","getElementById"],"mappings":"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","file":"static/js/main.09312935.chunk.js","sourcesContent":["// Import the functions you need from the SDKs you need\r\nimport { initializeApp } from \"firebase/app\";\r\nimport { getAnalytics } from \"firebase/analytics\";\r\nimport { GoogleAuthProvider, getAuth, Auth, User } from \"firebase/auth\";\r\nimport { getDatabase } from 'firebase/database';\r\nimport { doc, DocumentData, DocumentSnapshot, getDoc, getFirestore, setDoc, query, collection, onSnapshot, getDocs, limit, orderBy, Timestamp, deleteDoc } from \"firebase/firestore\";\r\nimport React from \"react\";\r\n// TODO: Add SDKs for Firebase products that you want to use\r\n// https://firebase.google.com/docs/web/setup#available-libraries\r\n\r\n// Your web app's Firebase configuration\r\n// For Firebase JS SDK v7.20.0 and later, measurementId is optional\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyDEkMmRttZeYHc6agXVRTjfFr2KLQI2XsA\",\r\n  authDomain: \"dd-asia.firebaseapp.com\",\r\n  projectId: \"dd-asia\",\r\n  storageBucket: \"dd-asia.appspot.com\",\r\n  messagingSenderId: \"256048594049\",\r\n  appId: \"1:256048594049:web:ada7a2bda342777439a180\",\r\n  measurementId: \"G-SL6D3XB4PB\"\r\n};\r\n\r\nexport interface UserFirestore{\r\n  displayName?: string,\r\n  sex?: string,\r\n  photoURL?: string\r\n}\r\nexport interface NewsFirestore{\r\n  title?: string,\r\n  timestamp?: Timestamp\r\n  author?: string,\r\n  content?: string,\r\n  headerImage?: string,\r\n  newsId?: string\r\n}\r\nexport interface LikeFirestore{\r\n  uid?: string,\r\n  timestamp?: Timestamp\r\n}\r\nexport interface PhotoFirestore{\r\n  id?: string,\r\n  url?: string,\r\n  timestamp?: Timestamp,\r\n  title?: string\r\n}\r\n\r\nconst userConveter = {\r\n  toFirestore: (userFirestore: UserFirestore) => {\r\n      return {\r\n        name: userFirestore.displayName,\r\n        photoURL: userFirestore.photoURL\r\n      };\r\n  },\r\n  fromFirestore: (snapshot: DocumentSnapshot | undefined) : UserFirestore => {\r\n    if(!snapshot) return {};\r\n\r\n    const data = snapshot.data();\r\n    return {\r\n      displayName: data?.name,\r\n      sex: data?.sex,\r\n      photoURL: data?.photoURL\r\n    };\r\n  }\r\n};\r\n\r\nconst newsConveter = {\r\n  fromFirestore: (snapshot: DocumentSnapshot | undefined) : NewsFirestore => {\r\n    if(!snapshot) return {};\r\n\r\n    const data = snapshot.data();\r\n    return {\r\n      author: data?.Author,\r\n      content: data?.Content,\r\n      headerImage: data?.HeaderImage,\r\n      timestamp: data?.Timestamp,\r\n      title: data?.Title,\r\n      newsId: snapshot?.id\r\n    };\r\n  }\r\n};\r\n\r\nconst likesConveter = {\r\n  fromFirestore: (snapshot: DocumentSnapshot | undefined) : LikeFirestore => {\r\n    if(!snapshot) return {};\r\n    const data = snapshot.data();\r\n    return {\r\n      uid: snapshot?.id,\r\n      timestamp: data?.Timestamp\r\n    };\r\n  }\r\n};\r\n\r\nconst photosConverter = {\r\n  fromFirestore: (snapshot: DocumentSnapshot | undefined) : PhotoFirestore => {\r\n    if(!snapshot) return {};\r\n\r\n    const data = snapshot.data();\r\n    return {\r\n      id: snapshot?.id,\r\n      timestamp: data?.timestamp,\r\n      url: data?.url,\r\n      title: data?.title\r\n    };\r\n  }\r\n};\r\n\r\n// Initialize Firebase\r\nconst app = initializeApp(firebaseConfig);\r\n// const analytics = getAnalytics(app);\r\nexport const provider = new GoogleAuthProvider();\r\nexport const auth = getAuth();\r\nexport const db = getFirestore();\r\n\r\nexport const AuthContext = React.createContext({\r\n    auth, provider, db\r\n});\r\n\r\nexport function getUserInFirestore(user: User){\r\n  return new Promise<{userFirestore: UserFirestore; userExists: boolean;}>((resolve, reject) =>\r\n    getDoc(doc(db, \"users\", user.uid))\r\n      .then((value) => resolve({\r\n        userFirestore: userConveter.fromFirestore(value),\r\n        userExists: value.exists()\r\n      }))\r\n      .catch((reason) => reject(reason))\r\n    )\r\n}\r\n\r\nexport function setUserInFirestore(user: User, userFirestore: UserFirestore){\r\n  return new Promise((resolve, reject) =>\r\n    setDoc(doc(db, \"users\", user.uid), userConveter.toFirestore(userFirestore))\r\n      .then((value) => resolve(value))\r\n    )\r\n}\r\n\r\nexport function onUserInFirestoreUpdate(user: User, callback: (userFire: UserFirestore | undefined) => void){\r\n  return onSnapshot(doc(db, \"users\", user.uid), (doc) => callback(userConveter.fromFirestore(doc)));\r\n}\r\n\r\nexport function getNews(){\r\n  return new Promise<NewsFirestore[]>((resolve, reject) => {\r\n    getDocs(query(collection(db, \"news\"), orderBy('Timestamp', \"desc\")))\r\n    .then((value) => {\r\n      console.log(value);\r\n      resolve(value.docs.map(newsConveter.fromFirestore))\r\n    });\r\n  });\r\n}\r\n\r\nexport function getPhotos(){\r\n  return new Promise<PhotoFirestore[]>((resolve, reject) => {\r\n    getDocs(query(collection(db, \"photos\")))\r\n    .then((value) => {\r\n      console.log(value);\r\n      resolve(value.docs.map(photosConverter.fromFirestore))\r\n    });\r\n  });\r\n}\r\n\r\nexport function addLikeToNews(user: User, newsId: string){\r\n  setDoc(doc(db, \"news\", newsId, \"likes\", user.uid), {\r\n    Timestamp: Timestamp.fromDate(new Date())\r\n  });\r\n}\r\nexport function getLikesFromNews(user: User, newsId: string){\r\n  return new Promise<LikeFirestore[]>((resolve, reject) => {\r\n    getDocs(query(collection(db, \"news\", newsId, 'likes')))\r\n    .then((value) => resolve(value.docs.map(likesConveter.fromFirestore)))\r\n  });\r\n}\r\nexport function removeLikeFromNews(user: User, newsId: string){\r\n  deleteDoc(doc(db, \"news\", newsId, \"likes\", user.uid));\r\n}\r\n\r\nexport function addLikeToPhoto(user: User, photoId: string){\r\n  setDoc(doc(db, \"photos\", photoId, \"likes\", user.uid), {\r\n    Timestamp: Timestamp.fromDate(new Date())\r\n  });\r\n}\r\nexport function getLikesFromPhoto(user: User, photoId: string){\r\n  return new Promise<LikeFirestore[]>((resolve, reject) => {\r\n    getDocs(query(collection(db, \"photos\", photoId, 'likes')))\r\n    .then((value) => resolve(value.docs.map(likesConveter.fromFirestore)))\r\n  });\r\n}\r\nexport function removeLikeFromPhoto(user: User, photoId: string){\r\n  deleteDoc(doc(db, \"photos\", photoId, \"likes\", user.uid));\r\n}","import React, { useContext, useState } from \"react\"\r\nimport { Box, Button, Typography, Skeleton, Avatar, Stack, TextField, Snackbar, Alert } from '@mui/material';\r\nimport { AuthContext, getUserInFirestore, onUserInFirestoreUpdate, setUserInFirestore, UserFirestore } from \"./fire\";\r\nimport { onAuthStateChanged, User, browserLocalPersistence, setPersistence, signInWithPopup, signOut } from \"@firebase/auth\";\r\nimport { Unsubscribe } from \"firebase/firestore\";\r\n\r\nexport const logIn = (auth: any, provider: any) => {\r\n    setPersistence(auth, browserLocalPersistence)\r\n    .then(() => {\r\n        signInWithPopup(auth, provider)\r\n        .then((result) => {\r\n            console.log(\"User loggined in.\");\r\n        }).catch((error) => {\r\n            const errorCode = error.code;\r\n            const errorMessage = error.message;\r\n            console.log(errorCode);\r\n            console.log(errorMessage);\r\n        });\r\n    })\r\n}\r\n\r\nexport const logOut = (auth: any) => {\r\n    signOut(auth).then(() => {}).catch((error) => {\r\n        console.warn(\"Unable to sign out!\");\r\n    }); \r\n}\r\n\r\nconst AuthorizedLoaded = ({userFirestore, ...props}: {userFirestore?: UserFirestore}) => {\r\n    const { auth } = useContext(AuthContext);\r\n    const [user] = useState(userFirestore!);\r\n    const [snackOpen, setOpenSnack] = useState(false);\r\n    return <React.Fragment>\r\n        <Box sx={{\r\n            backgroundColor: '#fff',\r\n            padding: '2rem',\r\n            color: \"#000\"\r\n        }}>\r\n            <Stack spacing='1rem'>\r\n                <Avatar variant=\"square\" src={user?.photoURL} sx={{\r\n                    width: '200px',\r\n                    height: '200px'\r\n                }}/>\r\n                <TextField id=\"standard-basic\" label=\"Полное имя\" variant=\"standard\" defaultValue={user?.displayName} onChange={\r\n                        (event) => user.displayName=event.target.value\r\n                    }/>\r\n                <Button variant=\"contained\" color=\"primary\" onClick={(() => {\r\n                    setUserInFirestore(auth.currentUser!, user);\r\n                    setOpenSnack(true);\r\n                })}>\r\n                    Сохранить\r\n                </Button>\r\n                <Button variant=\"contained\" color=\"warning\" onClick={() => {\r\n                    logOut(auth);\r\n                }}>\r\n                    Выйти\r\n                </Button>\r\n            </Stack>\r\n        </Box>\r\n        <Snackbar open={snackOpen} autoHideDuration={6000} onClose={() => setOpenSnack(false)}>\r\n            <Alert severity=\"success\" onClose={() => setOpenSnack(false)} variant=\"filled\">\r\n                Данные аккаунта сохранены!\r\n            </Alert>\r\n        </Snackbar>\r\n    </React.Fragment>\r\n}\r\n\r\nconst AuthorizedLoading = ({...props}) => {\r\n    return <React.Fragment>\r\n        <Box sx={{\r\n            backgroundColor: '#fff',\r\n            padding: '2rem'\r\n        }}>\r\n            <Stack spacing='1rem'>\r\n                <Skeleton variant=\"rectangular\" width={200} height={200} />\r\n                <Skeleton variant=\"text\" />\r\n                <Skeleton variant=\"rectangular\" height={36.5} />\r\n                <Skeleton variant=\"rectangular\" height={36.5} />\r\n            </Stack>\r\n        </Box>\r\n        \r\n    </React.Fragment>\r\n}\r\n\r\nconst Authorized = ({userFirestore, userLoaded, ...props}: {userFirestore?: UserFirestore, userLoaded: boolean}) => { \r\n    return <React.Fragment>\r\n        {userLoaded ? <AuthorizedLoaded userFirestore={userFirestore}/> : <AuthorizedLoading/>}\r\n    </React.Fragment>\r\n}\r\nconst NotAuthorized = ({...props}) => {\r\n    const { auth, provider } = useContext(AuthContext); \r\n    return <React.Fragment>\r\n        <Typography variant=\"body1\">\r\n            Войдите в Google аккаунт, чтобы продолжить\r\n        </Typography>\r\n        <Button variant=\"contained\" onClick={() => {\r\n            logIn(auth, provider);\r\n        }}>\r\n            Войти\r\n        </Button>\r\n    </React.Fragment>\r\n}\r\nconst Account = ({...props}) => {\r\n    const { auth } = useContext(AuthContext); \r\n    const [user, setUser] = useState(auth.currentUser);\r\n    const [userFirestore, setUserFirestore] = useState<UserFirestore | undefined>({});\r\n    const [userFirestoreLoaded, setUserFirestoreLoaded] = useState(false);\r\n    const [listener, setListener] = useState<Unsubscribe | undefined>(undefined);\r\n    React.useEffect(() => {\r\n        onAuthStateChanged(auth, (user: User | null) => {\r\n            if(user){\r\n                if(listener === undefined){\r\n                    setListener(\r\n                        onUserInFirestoreUpdate(user, (userFirestore) => {\r\n                            setUserFirestore(userFirestore);\r\n                            setUserFirestoreLoaded(true);\r\n                        })\r\n                    );\r\n                    getUserInFirestore(user)\r\n                    .then(value => {\r\n                        if (!value.userExists){\r\n                            setUserInFirestore(user, {\r\n                                displayName: user?.displayName?.toString(),\r\n                                photoURL: user?.photoURL?.toString()\r\n                            }).then(() => {\r\n                                setUser(user);\r\n                            });\r\n                        }\r\n                        else{\r\n                            setUser(user);\r\n                            setUserFirestore(value.userFirestore);\r\n                            setUserFirestoreLoaded(true);\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n            else{\r\n                setUser(user);\r\n                setUserFirestoreLoaded(false);\r\n                if (listener)\r\n                    listener!();\r\n            }\r\n        });\r\n    }, [listener, auth]);\r\n    return <React.Fragment>\r\n        <Box sx={{padding: '1rem', color: '#fff'}}>\r\n            <Stack spacing='1.5rem'>\r\n                <Typography variant=\"h3\">\r\n                    Ваш аккаунт\r\n                </Typography>\r\n                {user ? <Authorized userFirestore={userFirestore} userLoaded={userFirestoreLoaded}/> : <NotAuthorized/>}\r\n            </Stack>\r\n        </Box>\r\n    </React.Fragment>\r\n}\r\n\r\nexport default Account;","import { AppBar, Button, IconButton, List, ListItem, ListItemIcon, ListItemText, Menu, MenuItem, Stack, SwipeableDrawer, Toolbar, Typography , Skeleton} from \"@mui/material\";\r\nimport { Box } from \"@mui/system\";\r\nimport React from \"react\";\r\nimport Account from '@mui/icons-material/AccountCircle';\r\nimport { styled } from '@mui/styles';\r\nimport StarIcon from '@mui/icons-material/Star';\r\nimport PhotoAlbumIcon from '@mui/icons-material/PhotoAlbum';\r\nimport ReceiptIcon from '@mui/icons-material/Receipt';\r\nimport KeyboardArrowRightIcon from '@mui/icons-material/KeyboardArrowRight';\r\nimport {NavigateFunction, useNavigate, useLocation, Location} from 'react-router-dom';\r\nimport Divider from '@mui/material/Divider';\r\nimport { AuthContext, getUserInFirestore, onUserInFirestoreUpdate, UserFirestore } from './fire';\r\nimport { logOut } from './PageAccount';\r\nimport { onAuthStateChanged, User } from \"@firebase/auth\";\r\nimport { Unsubscribe } from \"firebase/firestore\";\r\n\r\n\r\ninterface IProps{\r\n    setDrawerWidthCallback: React.Dispatch<React.SetStateAction<string>>,\r\n    navigate?: NavigateFunction,\r\n    location?: Location\r\n};\r\ninterface IState{\r\n    accountMenuOpen: boolean,\r\n    accountCircleAnchor: null | HTMLElement,\r\n    drawerOpen: boolean,\r\n    drawerWidthPx: number,\r\n    userFirestoreLoaded: boolean,\r\n    userFirestore?: UserFirestore,\r\n    listener?: Unsubscribe,\r\n    currentUser?: User\r\n};\r\nconst MyAppBar = styled(AppBar)({\r\n    backgroundColor: '#fff',\r\n    color: '#000',\r\n    transition: 'margin-left 0.3s'\r\n});\r\n\r\nfunction getLocName(path: string){\r\n    switch(path){\r\n        case \"/DD\":\r\n            return \"Главная\";\r\n        case '/DD/news':\r\n            return 'Новости';\r\n        case '/DD/gallery':\r\n            return \"Галерея\"\r\n        case '/DD/account':\r\n            return 'Аккаунт';\r\n    }\r\n}\r\n\r\nclass NavBar extends React.PureComponent<IProps, IState>{\r\n    static contextType = AuthContext;\r\n    constructor(props: IProps){\r\n        super(props);\r\n        this.state = {\r\n            accountMenuOpen: false,\r\n            drawerOpen: true,\r\n            accountCircleAnchor: null,\r\n            drawerWidthPx: 240,\r\n            userFirestoreLoaded: false,\r\n        }\r\n        this.handleAccountClick = this.handleAccountClick.bind(this);\r\n        this.handleAccountClose = this.handleAccountClose.bind(this);\r\n        this.handleDrawerToggle = this.handleDrawerToggle.bind(this);\r\n    }\r\n    handleDrawerToggle(){\r\n        this.props.setDrawerWidthCallback((this.state.drawerOpen ? 55 : 240)+ 'px');\r\n        this.setState({\r\n            drawerOpen: !this.state.drawerOpen,\r\n            drawerWidthPx: (this.state.drawerOpen ? 55 : 240)\r\n        });\r\n    }\r\n    handleAccountClick(event: React.MouseEvent<HTMLButtonElement> | React.MouseEvent<HTMLDivElement>){\r\n        this.setState({\r\n            accountCircleAnchor: event.currentTarget,\r\n            accountMenuOpen: true\r\n        });\r\n    }\r\n    handleAccountClose(){\r\n        this.setState({\r\n            accountCircleAnchor: null,\r\n            accountMenuOpen: false\r\n        });\r\n    }\r\n    componentDidMount(){\r\n        onAuthStateChanged(this.context.auth, (user: User | null) => {\r\n            if(user){\r\n                this.setState({currentUser: user});\r\n                getUserInFirestore(user)\r\n                    .then(value => {\r\n                        this.setState({\r\n                            userFirestore: value.userFirestore,\r\n                            userFirestoreLoaded: true\r\n                        })\r\n                    });\r\n                if(this.state.listener) this.state.listener();\r\n                onUserInFirestoreUpdate(user, (userFire) => {\r\n                        this.setState({\r\n                            userFirestore: userFire,\r\n                            userFirestoreLoaded: true\r\n                        })\r\n                    });\r\n            }\r\n            else{\r\n                this.setState({currentUser: undefined});\r\n            }\r\n        });\r\n    }\r\n    render(){\r\n        return <Box sx={{ flexGrow: 1 }}>\r\n            <MyAppBar position=\"static\" className='root' sx={{\r\n                marginLeft: this.state.drawerWidthPx + 'px'\r\n            }}>\r\n                <Toolbar>\r\n                    <Stack spacing={2} direction='row'>\r\n                        <Typography variant=\"h6\">\r\n                            Дорогой добра\r\n                        </Typography>\r\n                        <Divider orientation=\"vertical\" flexItem variant='middle'/>\r\n                        <Typography variant=\"h6\">\r\n                            {getLocName(this.props.location!.pathname)}\r\n                        </Typography>\r\n                    </Stack>\r\n                </Toolbar>\r\n            </MyAppBar>\r\n            <SwipeableDrawer\r\n                open={this.state.drawerOpen}\r\n                onClose={this.handleDrawerToggle}\r\n                onOpen={this.handleDrawerToggle}\r\n                variant=\"permanent\"\r\n                sx={{\r\n                    flexShrink: 0,\r\n                    ...({\r\n                        '& .MuiDrawer-paper': {\r\n                            boxSizing: 'border-box',\r\n                            width: this.state.drawerWidthPx + 'px',\r\n                            transition: 'width 0.3s'\r\n                        }\r\n                    })\r\n                }}\r\n            >\r\n                <List>\r\n                    <ListItem button onClick={() => this.props.navigate!('/DD')}>\r\n                        <ListItemIcon>\r\n                            <StarIcon />\r\n                        </ListItemIcon>\r\n                        <ListItemText primary={'Главная'} />\r\n                    </ListItem>\r\n                    <ListItem button onClick={() => this.props.navigate!('/DD/news')}>\r\n                        <ListItemIcon>\r\n                            <ReceiptIcon />\r\n                        </ListItemIcon>\r\n                        <ListItemText primary={'Новости'} />\r\n                    </ListItem>\r\n                    <ListItem button onClick={() => this.props.navigate!('/DD/gallery')}>\r\n                        <ListItemIcon>\r\n                            <PhotoAlbumIcon />\r\n                        </ListItemIcon>\r\n                        <ListItemText primary={'Галерея'} />\r\n                    </ListItem>\r\n                    <ListItem button onClick={a => this.handleDrawerToggle()}>\r\n                        <ListItemIcon>\r\n                            <KeyboardArrowRightIcon sx={{\r\n                                transform: this.state.drawerOpen ? 'rotate(0.5turn)' : 'inherit',\r\n                                transition: 'transform 0.3s'\r\n                            }}/>\r\n                        </ListItemIcon>\r\n                    </ListItem>\r\n                </List>\r\n                <List sx={{marginTop: 'auto'}}>\r\n                    <ListItem>\r\n                        <Stack direction='row' spacing='20px'>\r\n                            <IconButton \r\n                                sx={{\r\n                                    padding: '0px'\r\n                                }}\r\n                                onClick={this.handleAccountClick}>\r\n                                <Account/>\r\n                            </IconButton>\r\n                            {this.state.currentUser ? \r\n                                (this.state.userFirestoreLoaded ? <Typography sx={{whiteSpace: 'nowrap'}}>{this.state.userFirestore!.displayName}</Typography> : <Skeleton variant=\"text\" width={200}/>)\r\n                            :\r\n                            <Button variant=\"contained\" onClick={() => {\r\n                                this.handleAccountClose();\r\n                                this.props.navigate!(\"/DD/account\");\r\n                            }}>\r\n                                Войти\r\n                            </Button>}\r\n                        </Stack>\r\n                    </ListItem>\r\n                </List>  \r\n                <Menu\r\n                    id=\"basic-menu\"\r\n                    open={this.state.accountMenuOpen}\r\n                    onClose={this.handleAccountClose}\r\n                    anchorEl={this.state.accountCircleAnchor}\r\n                    MenuListProps={{\r\n                    'aria-labelledby': 'basic-button',\r\n                    }}\r\n                >\r\n                    <MenuItem onClick={() => {\r\n                        this.handleAccountClose();\r\n                        this.props.navigate!(\"/DD/account\");\r\n                    }}>Ваш аккаунт</MenuItem>\r\n                    {this.state.currentUser ? \r\n                        <MenuItem onClick={() => {\r\n                            logOut(this.context.auth);\r\n                            this.handleAccountClose();\r\n                        }}>Выйти</MenuItem>\r\n                    :\r\n                        <MenuItem onClick={() => {\r\n                            this.handleAccountClose();\r\n                            this.props.navigate!(\"/DD/account\");\r\n                        }}>Войти</MenuItem>\r\n                    }\r\n                </Menu>\r\n            </SwipeableDrawer>\r\n        </Box>;\r\n    }\r\n}\r\n\r\nfunction WithNavigate(props: IProps) {\r\n    let navigate = useNavigate();\r\n    let location = useLocation();\r\n    return <NavBar {...props} navigate={navigate} location={location} />\r\n}\r\n\r\nexport default WithNavigate;\r\n","// @ts-ignore\r\nimport createGlobalState from 'react-create-global-state';\r\n\r\nexport const [useGlobalAuthNeeded, GlobalAuthNeededProvider] = createGlobalState(false);\r\nexport const [useGlobalPhotoViewer, GlobalPhotoViewerProvider] = createGlobalState(null);","import React, { useContext, useEffect, useState } from \"react\";\r\nimport { Button, Card, CardActions, CardContent, CardHeader, CardMedia, Checkbox, Skeleton, Typography } from '@mui/material';\r\nimport { FavoriteBorder, Favorite } from \"@mui/icons-material\";\r\nimport { addLikeToNews, AuthContext, getLikesFromNews, removeLikeFromNews } from \"./fire\";\r\nimport { useGlobalAuthNeeded } from './useGlobalStates';\r\n\r\ninterface ICardProps{\r\n    title?: string,\r\n    media?: string,\r\n    content?: string,\r\n    timestamp?: string,\r\n    newsId?: string\r\n}\r\nexport const NewsCard = ({title, media, content, timestamp, newsId, ...props}: ICardProps) => {\r\n    const { auth } = useContext(AuthContext); \r\n    const [ likesLoaded, setLikesLoaded ] = useState(false);\r\n    const [ likeGot, setLikeGot ] = useState(false);\r\n    const [ authNeeded, setAuthNeeded ] = useGlobalAuthNeeded();\r\n    useEffect(() => {\r\n        if(!likesLoaded){\r\n            if(auth.currentUser){\r\n                getLikesFromNews(auth.currentUser!, newsId!)\r\n                    .then((value) => {\r\n                        for(let like of value){\r\n                            console.log(like);\r\n                            if(like.uid === auth.currentUser!.uid){\r\n                                setLikeGot(true);\r\n                                console.log(`User has like on post #${newsId}`);\r\n                                break;\r\n                            }\r\n                        }\r\n                        setLikesLoaded(true);\r\n                    });\r\n            }\r\n            else{\r\n                setLikesLoaded(true);\r\n            }\r\n        }\r\n    }, [setLikesLoaded, setLikeGot, auth, likesLoaded, newsId]);\r\n    return <Card sx={{ minWidth: 300 }}>\r\n            <CardHeader\r\n                // avatar={\r\n                //     <Avatar src='https://images.unsplash.com/photo-1453728013993-6d66e9c9123a?ixid=MnwxMjA3fDB8MHxzZWFyY2h8Mnx8dmlld3xlbnwwfHwwfHw%3D&ixlib=rb-1.2.1&w=1000&q=80'/>\r\n                // }\r\n                title={title}\r\n                subheader={timestamp}\r\n            />\r\n            <CardMedia\r\n                component=\"img\"\r\n                height=\"194\"\r\n                image={media}\r\n                alt={title}\r\n            />\r\n            <CardContent>\r\n                <Typography variant=\"body2\" color=\"text.secondary\">\r\n                    {content}\r\n                </Typography>\r\n            </CardContent>\r\n            <CardActions>\r\n                {likesLoaded ?\r\n                <React.Fragment>\r\n                <Checkbox\r\n                    icon={<FavoriteBorder/>}\r\n                    checkedIcon={<Favorite/>}\r\n                    checked={likeGot}\r\n                    onClick={(event) => {\r\n                        if (auth.currentUser){\r\n                            console.log(likeGot);\r\n                            if(!likeGot){\r\n                                setLikeGot(true);\r\n                                addLikeToNews(auth.currentUser!, newsId!);\r\n                                console.log(`Like added to news #${newsId}`);\r\n                            }\r\n                            else{\r\n                                setLikeGot(false);\r\n                                removeLikeFromNews(auth.currentUser!, newsId!);\r\n                                console.log(`Like removed from news #${newsId}`);\r\n                            }\r\n                        }\r\n                        else{\r\n                            setAuthNeeded(true);\r\n                        }\r\n                    }}  \r\n                />\r\n                <Button size=\"small\" sx={{marginLeft: 'auto'}}>Читать далее</Button>\r\n                </React.Fragment>\r\n                :\r\n                <Skeleton variant='rectangular' width={200} height={20}/>\r\n                }\r\n                {/* <IconButton sx={{marginLeft: 'auto'}}>\r\n                    <ReadMoreIcon/>\r\n                </IconButton> */}\r\n            </CardActions>\r\n        </Card>\r\n}\r\n\r\n// export default function NewsCard(){\r\n//     return <Box sx={{ minWidth: 275, maxWidth: 'unset', marginLeft: '0.5rem' }}>\r\n//         <Card>{card}</Card>\r\n//     </Box>\r\n// }","import React, { useState, useEffect } from \"react\"\r\nimport NewsCardGrid from \"./NewsCardGrid\";\r\nimport { Box, Button, Skeleton, Typography } from '@mui/material';\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { getNews, NewsFirestore } from \"./fire\";\r\nimport { NewsCard } from './NewsCard';\r\n\r\nconst Main = ({...props}) => {\r\n    let navigate = useNavigate();\r\n    const [news, setNews] = useState<NewsFirestore[]>([]);\r\n    useEffect(() => {\r\n        if(news.length === 0)\r\n            getNews()\r\n                .then((newsRaw) => {\r\n                    console.log(newsRaw);\r\n                    setNews(newsRaw);\r\n                });\r\n    });\r\n    return <React.Fragment>\r\n        <Box sx={{margin: '2rem', color: '#fff'}}>\r\n            <Typography variant=\"h3\"> \r\n                Новости\r\n            </Typography>\r\n            <Typography variant='subtitle1'>\r\n                Смотрите наши последние новости\r\n            </Typography>\r\n            <Button onClick={() => navigate('/DD/news')} variant=\"contained\">\r\n                Все новости\r\n            </Button>\r\n        </Box>\r\n        {news.length > 0 ? \r\n        <div className=\"news-grid-unflexable\">\r\n            {news.map((newsOne) => \r\n                <NewsCard content={newsOne.content} media={newsOne.headerImage} timestamp={'Опубликовано ' + newsOne.timestamp?.toDate().toLocaleDateString()} title={newsOne.title} newsId={newsOne.newsId} key={newsOne.newsId!}/>)\r\n            }\r\n        </div>\r\n        :\r\n        <div className=\"news-grid-unflexable\">\r\n            <Skeleton variant=\"rectangular\" width={275} height={433}/>\r\n            <Skeleton variant=\"rectangular\" width={275} height={433}/>\r\n            <Skeleton variant=\"rectangular\" width={275} height={433}/>\r\n        </div>\r\n        }\r\n    </React.Fragment>\r\n}\r\n\r\nexport default Main;","import React, {useState, useEffect} from \"react\"\r\nimport {NewsCard} from \"./NewsCard\";\r\nimport { Box, Skeleton, Typography, Stack } from '@mui/material';\r\nimport { getNews, NewsFirestore } from \"./fire\";\r\n\r\nconst News = ({...props}) => {\r\n    const [news, setNews] = useState<NewsFirestore[]>([]);\r\n    useEffect(() => {\r\n        if(news.length === 0)\r\n            getNews()\r\n                .then((newsRaw) => {\r\n                    console.log(newsRaw);\r\n                    setNews(newsRaw);\r\n                });\r\n    });\r\n    return <React.Fragment>\r\n        <Box sx={{\r\n            color: '#fff',\r\n            justifyContent: 'space-around',\r\n            padding: '1rem'\r\n        }}>\r\n            <Stack spacing='1.5rem'>\r\n                <Typography variant='h3'>\r\n                    Все новости\r\n                </Typography>\r\n                {news.length > 0 ? \r\n                <div className=\"news-grid\">\r\n                    {news.map((newsOne) => \r\n                        <NewsCard content={newsOne.content} media={newsOne.headerImage} timestamp={'Опубликовано ' + newsOne.timestamp?.toDate().toLocaleDateString()} title={newsOne.title} newsId={newsOne.newsId} key={newsOne.newsId!}/>)\r\n                    }\r\n                </div>\r\n                :\r\n                <div className=\"news-grid\">\r\n                    <Skeleton variant=\"rectangular\" width={275} height={433}/>\r\n                    <Skeleton variant=\"rectangular\" width={275} height={433}/>\r\n                    <Skeleton variant=\"rectangular\" width={275} height={433}/>\r\n                </div>\r\n                }\r\n            </Stack>\r\n            \r\n        </Box>\r\n    </React.Fragment>\r\n}\r\n\r\nexport default News;","import { Checkbox, ImageListItem, ImageListItemBar, Skeleton } from \"@mui/material\";\r\nimport React, {useState, useContext, useEffect} from \"react\";\r\nimport StarIcon from '@mui/icons-material/Star';\r\nimport StarBorderIcon from '@mui/icons-material/StarBorder';\r\nimport { Timestamp } from \"firebase/firestore\";\r\nimport { addLikeToPhoto, AuthContext, getLikesFromPhoto, removeLikeFromPhoto } from \"./fire\";\r\nimport { useGlobalAuthNeeded, useGlobalPhotoViewer } from './useGlobalStates';\r\n\r\ninterface IProps {\r\n    url?: string,\r\n    timestamp?: Timestamp,\r\n    title?: string,\r\n    photoId: string\r\n}\r\nexport default function ImageListed({url, title, photoId, ...props}: IProps){\r\n    const { auth } = useContext(AuthContext); \r\n    const [ likesLoaded, setLikesLoaded ] = useState(false);\r\n    const [ likeGot, setLikeGot ] = useState(false);\r\n    const [ authNeeded, setAuthNeeded ] = useGlobalAuthNeeded();\r\n    const [ viewerData, setViewerData ] = useGlobalPhotoViewer();\r\n    useEffect(() => {\r\n        if(!likesLoaded){\r\n            if(auth.currentUser){\r\n                getLikesFromPhoto(auth.currentUser!, photoId)\r\n                    .then((value) => {\r\n                        for(let like of value){\r\n                            console.log(like);\r\n                            if(like.uid === auth.currentUser!.uid){\r\n                                setLikeGot(true);\r\n                                console.log(`User has like on photo #${photoId}`);\r\n                                break;\r\n                            }\r\n                        }\r\n                        setLikesLoaded(true);\r\n                    });\r\n            }\r\n            else{\r\n                setLikesLoaded(true);\r\n            }\r\n        }\r\n    }, [setLikesLoaded, setLikeGot, auth, likesLoaded, photoId]);\r\n    return <ImageListItem>\r\n        <img src={url} alt={title} onClick={() => setViewerData({\r\n                url: url,\r\n                title: title\r\n            })} style={{cursor: 'pointer'}}/>\r\n        <ImageListItemBar\r\n            title={title}\r\n            position=\"top\"\r\n            actionIcon={\r\n                likesLoaded ? \r\n                <Checkbox\r\n                    icon={<StarBorderIcon sx={{color: '#fff'}}/>}\r\n                    checkedIcon={<StarIcon sx={{color: '#fff'}}/>}\r\n                    checked={likeGot}\r\n                    onClick={(event) => {\r\n                        if (auth.currentUser){\r\n                            console.log(likeGot);\r\n                            if(!likeGot){\r\n                                setLikeGot(true);\r\n                                addLikeToPhoto(auth.currentUser!, photoId);\r\n                                console.log(`Like added to news #${photoId}`);\r\n                            }\r\n                            else{\r\n                                setLikeGot(false);\r\n                                removeLikeFromPhoto(auth.currentUser!, photoId);\r\n                                console.log(`Like removed from news #${photoId}`);\r\n                            }\r\n                        }\r\n                        else{\r\n                            setAuthNeeded(true);\r\n                        }\r\n                    }}  \r\n                />\r\n                :\r\n                <Skeleton variant='rectangular' width={30} height={30}/>\r\n            }\r\n            actionPosition=\"left\"\r\n        />\r\n    </ImageListItem>\r\n}","import React, { useEffect, useState, useContext } from \"react\"\r\nimport { Box, Grid, ImageList, Rating, Skeleton, Typography, Stack } from '@mui/material';\r\nimport ImageListed from './ImageListed';\r\nimport { getPhotos, PhotoFirestore } from \"./fire\";\r\n\r\nconst Gallery = ({...props}) => {\r\n    const [photosLoaded, setPhotosLoaded] = useState(false);\r\n    const [photos, setPhotos] = useState<PhotoFirestore[]>([]);\r\n    useEffect(() => {\r\n        if(!photosLoaded){\r\n            getPhotos()\r\n                .then((photos_) => {\r\n                    setPhotos(photos_);\r\n                    setPhotosLoaded(true);\r\n                });\r\n        }\r\n    }, [setPhotosLoaded, setPhotos, photosLoaded]);\r\n    return <React.Fragment>\r\n        <Box sx={{\r\n            color: '#fff',\r\n            justifyContent: 'space-around',\r\n            padding: '1rem'\r\n        }}>\r\n            <Stack spacing='1.5rem'>\r\n                <Typography variant='h3'>\r\n                    Фотогалерея\r\n                </Typography>\r\n                {photosLoaded ? \r\n                <ImageList cols={3}>\r\n                    {photos.map((photo) => \r\n                        <ImageListed title={photo?.title} url={photo?.url} timestamp={photo?.timestamp} key={photo?.id} photoId={photo!.id!}/>)\r\n                    }\r\n                </ImageList>\r\n                :\r\n                <div className=\"news-grid\">\r\n                    <Skeleton variant=\"rectangular\" width={275} height={200}/>\r\n                    <Skeleton variant=\"rectangular\" width={275} height={200}/>\r\n                    <Skeleton variant=\"rectangular\" width={275} height={200}/>\r\n                </div>\r\n                }\r\n            </Stack>\r\n        </Box>\r\n    </React.Fragment>\r\n}\r\n\r\nexport default Gallery;","import { Button, Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle } from \"@mui/material\";\r\nimport React from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useGlobalAuthNeeded } from './useGlobalStates';\r\n\r\n\r\nexport const AuthNeededDialog = ({...props}) => {\r\n    const [ needAuth, setNeedAuth ] = useGlobalAuthNeeded();\r\n    let navigate = useNavigate();\r\n    return <Dialog\r\n        open={needAuth}\r\n        onClose={() => setNeedAuth(false)}\r\n        aria-labelledby=\"alert-dialog-title\"\r\n        aria-describedby=\"alert-dialog-description\"\r\n    >\r\n        <DialogTitle id=\"alert-dialog-title\">\r\n        {\"Вы не зарегистрированы\"}\r\n        </DialogTitle>\r\n        <DialogContent>\r\n        <DialogContentText id=\"alert-dialog-description\">\r\n            Вы должны зарегестрироваться, чтобы оставлять лайки.\r\n        </DialogContentText>\r\n        </DialogContent>\r\n        <DialogActions>\r\n        <Button onClick={() => setNeedAuth(false)}>Отмена</Button>\r\n        <Button onClick={() => {\r\n            setNeedAuth(false);\r\n            navigate('/DD/account');\r\n        }} autoFocus>\r\n            Регистрация\r\n        </Button>\r\n        </DialogActions>\r\n    </Dialog>\r\n}","import { Dialog, DialogTitle, DialogContent, DialogContentText, DialogActions, Button } from \"@mui/material\";\r\nimport React from \"react\";\r\nimport { useGlobalAuthNeeded, useGlobalPhotoViewer } from \"./useGlobalStates\";\r\n\r\nexport const PhotoViewer = () => {\r\n    const [ authNeeded, setAuthNeeded ] = useGlobalAuthNeeded();\r\n    const [ viewerData, setViewerData ] = useGlobalPhotoViewer();\r\n    return <Dialog\r\n        open={viewerData !== null}\r\n        onClose={() => setViewerData(null)}\r\n        aria-labelledby=\"alert-dialog-title\"\r\n        aria-describedby=\"alert-dialog-description\"\r\n    >\r\n        <DialogTitle id=\"alert-dialog-title\">\r\n            {viewerData?.title}\r\n        </DialogTitle>\r\n        <DialogContent>\r\n            <img src={viewerData?.url} alt={viewerData?.title} style={{width: '100%'}}/>\r\n        </DialogContent>\r\n        <DialogActions>\r\n        </DialogActions>\r\n    </Dialog>\r\n}","import logo from './logo.svg';\nimport './App.css';\nimport Checkbox from '@mui/material/Checkbox';\nimport FavoriteBorder from '@mui/icons-material/FavoriteBorder';\nimport Favorite from '@mui/icons-material/Favorite';\nimport React from 'react';\nimport { Box, ImageList, Rating, Typography } from '@mui/material';\nimport NavBar from './NavBar';\nimport { Link, Route, Routes } from \"react-router-dom\";\nimport Main from './PageMain';\nimport News from './PageNews';\nimport Gallery from './PageGallery';\nimport Account from './PageAccount';\nimport { AuthNeededDialog } from './AuthNeededDialog';\nimport { PhotoViewer } from './PhotoViewer';\n\nfunction App() {\n  const [drawerWidth, setDrawerWidth] = React.useState('240px');\n  return (\n    <div className=\"App\">\n      <NavBar setDrawerWidthCallback={setDrawerWidth}/>\n      <AuthNeededDialog/>\n      <PhotoViewer/>\n      <Box sx={{display: 'flex', marginTop: '2rem', marginLeft: drawerWidth, transition: 'margin-left 0.3s'}}>\n        <Routes>\n          <Route path=\"/DD\" element={<Main/>}/>\n          <Route path=\"/DD/news\" element={<News/>}/>\n          <Route path=\"/DD/gallery\" element={<Gallery/>}/>\n          <Route path=\"/DD/account\" element={<Account/>}/>\n        </Routes>\n      </Box>\n      {/* <ImageList>\n        <ImageListed/>\n        <ImageListed/>\n        <ImageListed/>\n      </ImageList> */}\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport { AuthContext, auth, provider, db} from './fire';\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport { useGlobalAuthNeeded, GlobalAuthNeededProvider, GlobalPhotoViewerProvider } from './useGlobalStates';\nimport { createTheme } from '@mui/material';\n\n// const theme = createTheme({\n//   palette: {\n//     background: {\n//       paper: '#D9EEEC'\n//     }\n//   }\n// });\n\nReactDOM.render(\n  <React.StrictMode>\n    <AuthContext.Provider value={{\n      auth, provider, db\n    }}>\n      <Router>\n        <GlobalPhotoViewerProvider>\n          <GlobalAuthNeededProvider>\n            <App />\n          </GlobalAuthNeededProvider>\n        </GlobalPhotoViewerProvider>\n      </Router>\n    </AuthContext.Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}